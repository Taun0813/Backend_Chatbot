âœ… PHáº¦N 1 â€” DATABASE SCHEMA (FULL)

Má»—i service cÃ³ database riÃªng (theo chuáº©n microservices).

ğŸŸ¦ 1. USER SERVICE DATABASE
Báº£ng users
Field	Type	Description
id	UUID (PK)	User ID
email	VARCHAR(120) UNIQUE	Login email
password	VARCHAR(255)	Hashed password
full_name	VARCHAR(120)	User name
phone	VARCHAR(20)	Phone number
role	VARCHAR(20)	ADMIN  USER
created_at	TIMESTAMP	Auto
updated_at	TIMESTAMP	Auto
Báº£ng addresses
Field	Type	Description
id	UUID PK	Address ID
user_id	UUID FK â†’ users(id)	Owner
full_name	VARCHAR(120)	Receiver name
phone	VARCHAR(20)	Receiver phone
address_line	VARCHAR(255)	Address text
city	VARCHAR(100)	
district	VARCHAR(100)	
ward	VARCHAR(100)	
is_default	BOOLEAN	
created_at	TIMESTAMP	
ğŸŸ© 2. PRODUCT SERVICE DATABASE
Báº£ng products
Field	Type	Description
id	UUID PK	
name	VARCHAR(255)	
brand	VARCHAR(100)	
price	DECIMAL(12,2)	
stock	INT	
short_description	TEXT	
description	TEXT	
thumbnail	VARCHAR(255)	
created_at	TIMESTAMP	
updated_at	TIMESTAMP	
Báº£ng product_specs
Field	Type
id	UUID PK
product_id	UUID FK
cpu	VARCHAR(255)
ram	VARCHAR(50)
storage	VARCHAR(50)
battery	VARCHAR(50)
screen	VARCHAR(255)
camera	VARCHAR(255)
os	VARCHAR(50)
created_at	TIMESTAMP
Báº£ng categories

 Field  Type 
 id  UUID PK 
 name  VARCHAR(255) 

Báº£ng product_categories

 product_id  UUID FK 
 category_id  UUID FK 

ğŸŸ§ 3. ORDER SERVICE DATABASE
Báº£ng orders
Field	Type	Description
id	UUID PK	
user_id	UUID	
total_price	DECIMAL(12,2)	
payment_status	VARCHAR(20)	PENDING  PAID  FAILED
order_status	VARCHAR(20)	CREATED  CONFIRMED  SHIPPING  COMPLETED  CANCELLED
created_at	TIMESTAMP	
updated_at	TIMESTAMP	
Báº£ng order_items
Field	Type
id	UUID PK
order_id	UUID FK
product_id	UUID
quantity	INT
price	DECIMAL(12,2)
ğŸŸ¥ 4. PAYMENT SERVICE DATABASE
Báº£ng payments
Field	Type
id	UUID PK
order_id	UUID
payment_method	VARCHAR(50)
status	VARCHAR(20)
transaction_id	VARCHAR(255)
amount	DECIMAL(12,2)
created_at	TIMESTAMP
ğŸŸ¨ 5. WARRANTY SERVICE DATABASE
Báº£ng warranties
Field	Type
id	UUID PK
order_id	UUID
product_id	UUID
user_id	UUID
warranty_status	VARCHAR(30)
expiration_date	DATE
created_at	TIMESTAMP
Báº£ng warranty_claims
Field	Type
id	UUID PK
warranty_id	UUID
issue_description	TEXT
status	VARCHAR(20)
created_at	TIMESTAMP
ğŸŸª 6. RECOMMENDATION SERVICE DATABASE

(Chá»‰ cache â€“ Ã­t báº£ng)

Báº£ng recommendations_cache
Field	Type
id	UUID PK
query	TEXT
result	JSONB
created_at	TIMESTAMP
ğŸŸ« 7. CART SERVICE DATABASE
Báº£ng carts

 user_id  UUID PK 
 created_at  TIMESTAMP 

Báº£ng cart_items

 id  UUID 
 user_id  UUID 
 product_id  UUID 
 quantity  INT 

ğŸš€ PHáº¦N 2 â€” API DOCUMENTATION (FULL SPEC)

API Ä‘Æ°á»£c viáº¿t theo chuáº©n REST. DÃ¹ng OpenAPI 3.0 khi implement.

ğŸŸ¦ 1. USER SERVICE API
POST authregister

Request

{
  email test@gmail.com,
  password 123456,
  fullname Test
}


Response

{
  message REGISTER_SUCCESS
}

POST authlogin

Response

{
  token jwt-token,
  user { ... }
}

GET usersme

â†’ Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng hiá»‡n táº¡i.

POST usersaddress

â†’ Add Ä‘á»‹a chá»‰.

Body

{
  full_name Nguyen A,
  phone 0123,
  address_line 123 ABC,
  city HCM
}

ğŸŸ© 2. PRODUCT SERVICE API
GET products

Tráº£ vá» list sáº£n pháº©m.

GET products{id}
POST products (Admin)

Táº¡o sáº£n pháº©m.

PUT products{id}
DELETE products{id}
GET productssearchquery=iphone
GET products{id}specs
ğŸŸ§ 3. ORDER SERVICE API
POST orders

Body

{
  user_id 123,
  items [
    { product_id p1, quantity 2 }
  ]
}


Response

{
  order_id uuid,
  total 12000000,
  status CREATED
}

GET orders{id}
PUT orders{id}cancel
ğŸŸ¥ 4. PAYMENT SERVICE API
POST paymentcreate
{
  order_id uuid,
  method VNPAY
}


Response

{
  payment_url https...
}

POST paymentcallback

â†’ Payment gateway callback

ğŸŸ¨ 5. WARRANTY SERVICE API
GET warranty{order_id}
POST warrantyclaim
{
  order_id uuid,
  issue Screen cracked
}

ğŸŸª 6. RECOMMENDATION SERVICE API

ğŸ“Œ DÃ¹ng bá»Ÿi AI Agent Ä‘á»ƒ lá»c sáº£n pháº©m website tá»« dataset

POST airecommend

Body

{
  results [
    { brand OnePlus, model 9R, score 0.92 }
  ]
}


Response

{
  matches [
    { product_id uuid, name OnePlus 9R, price 12000000 }
  ]
}

ğŸŸ« 7. CART SERVICE API
GET cart
POST cartadd
{
  product_id uuid,
  quantity 1
}

DELETE cart{item_id}
ğŸš€ PHáº¦N 3 â€” Káº¾T LUáº¬N

Báº¡n Ä‘Ã£ cÃ³

âœ” Database chuáº©n cho toÃ n bá»™ microservices
âœ” Full API Docs (REST spec)
âœ” Flow vÃ  chá»©c nÄƒng inline cho tá»«ng service
âœ” Chuáº©n Spring Boot â†’ PostgreSQL â†’ Redis â†’ Kafka
âœ” DÃ¹ng Ä‘Æ°á»£c ngay Ä‘á»ƒ code backend hoÃ n chá»‰nh
â“ Báº¡n muá»‘n mÃ¬nh lÃ m tiáº¿p pháº§n nÃ o

TÃ´i cÃ³ thá»ƒ tiáº¿p tá»¥c

ğŸ”¹ Táº¡o Mermaid ERD diagram cho toÃ n bá»™ database
ğŸ”¹ Viáº¿t file OpenAPI 3.0 YAML hoÃ n chá»‰nh
ğŸ”¹ Generate skeleton code Spring Boot cho tá»«ng service
ğŸ”¹ Viáº¿t ChÆ°Æ¡ng 3 (Thiáº¿t káº¿ há»‡ thá»‘ng) cho luáº­n vÄƒn
ğŸ”¹ Táº¡o docker-compose.yml cho táº¥t cáº£ services